{% extends "web_page/layout.html" %}

{% block body %}

<h2>Надахни ме</h2>

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-body text-center">
                    <div id="verse-container">
                        <p class="lead" id="verse-text">Учитава се...</p>
                        <p class="font-italic" id="verse-reference"></p>
                    </div>
                    <button id="new-verse-btn" class="btn btn-primary">
                        <i class='fas fa-dice'></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Function to fetch and display a random verse
    function fetchRandomVerse() {
        fetch('/fetch/random_verse/')  // Update this URL to match your URL pattern
            .then(response => response.json())
            .then(data => {
                const verse = data.random_verse;
                document.getElementById('verse-text').textContent = verse.verse;
                document.getElementById('verse-reference').textContent = 
                    `${verse.book_acronym} ${verse.chapter}:${verse.verse_number}`;
            })
            .catch(error => {
                console.error('Error fetching verse:', error);
                document.getElementById('verse-text').textContent = 
                    'Error loading verse. Please try again.';
            });
    }

    // Fetch a verse when page loads
    fetchRandomVerse();

    document.getElementById('new-verse-btn').addEventListener('click', function(e) {
        fetchRandomVerse();
        e.target.blur(); // Remove focus
    });
});
</script>



{% endblock %}